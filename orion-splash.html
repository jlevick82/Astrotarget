<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AstroTarget Splash</title>
<style>
  body {
    margin: 0;
    background: black;
    overflow: hidden;
    color: white;
    font-family: 'Arial', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    transition: opacity 2s;
  }
  canvas {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 0;
  }
  #logo {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 8vw;
    font-weight: bold;
    z-index: 1;
  }
  #astro-line {
    display: flex;
    align-items: center;
    justify-content: center;
    color: #66ccff;
    opacity: 0;
    transform: translateX(-100vw);
    letter-spacing: 0.3em;
  }
  .dash {
    font-size: 1em;
    color: #0ff;
    margin: 0 0.6em;
    text-shadow: 0 0 8px #0ff;
  }
  #target-line {
    opacity: 0;
    transform: translateY(-100vh);
    color: #ff6666;
    line-height: 1.2;
    text-align: center;
  }
  #target-line span { display: block; }
  #sharedT {
    position: relative;
    color: #fff;
    text-shadow: 0 0 10px #0ff;
    cursor: pointer;
  }
  #reticle-ring {
    position: absolute;
    top: -0.55em;
    left: 50%;
    transform: translateX(-50%);
    width: 2.4em;
    height: 2.4em;
    border: 2px solid rgba(0,255,255,0.7);
    border-radius: 50%;
    box-shadow: 0 0 12px rgba(0,255,255,0.9);
    animation: pulse 2s infinite alternate;
    pointer-events: none;
  }
  #reticle {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 0.4em;
  }
  .caret {
    font-size: 1em;
    color: #0ff;
    line-height: 0.9;
    text-shadow: 0 0 6px #0ff;
    letter-spacing: 0.3em;
  }
  #tagline {
    margin-top: 3vh;
    font-size: 3.8vw;
    opacity: 0;
    color: #ccc;
    font-style: italic;
    text-align: center;
    text-shadow: 0 0 8px #0ff;
    z-index: 1;
  }
  #bootChecks {
    position: fixed;
    bottom: 5%;
    width: 90%;
    max-width: 600px;
    text-align: left;
    font-family: monospace;
    font-size: 3.2vw;
    z-index: 1;
    max-height: 25vh;
    overflow: hidden;
  }
  #bootChecks div {
    animation: fadeSlide 1s forwards;
  }
  .ok { color: #0ff; text-shadow: 0 0 8px #0ff; }
  .fail { color: #f33; text-shadow: 0 0 8px #900; }
  .wait { color: #39f; text-shadow: 0 0 6px #0ff; }
  /* Animations */
  .fadeIn { animation: fadeIn 2s forwards; }
  .slideInX { animation: slideInX 2s forwards; }
  .slideInY { animation: slideInY 2s forwards; }
  @keyframes fadeIn { to { opacity: 1; } }
  @keyframes slideInX { to { opacity: 1; transform: translateX(0); } }
  @keyframes slideInY { to { opacity: 1; transform: translateY(0); } }
  @keyframes pulse {
    from { opacity: 0.2; transform: scale(0.9); }
    to { opacity: 0.7; transform: scale(1.1); }
  }
  @keyframes fadeSlide {
    from { opacity: 0; transform: translateY(10px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  /* Easter Egg Warp Mode */
  #warpQuote {
    position: absolute;
    bottom: 10%;
    width: 100%;
    text-align: center;
    font-size: 4vw;
    color: #0ff;
    text-shadow: 0 0 10px #0ff;
    opacity: 0;
    z-index: 2;
  }
</style>
</head>
<body>

<canvas id="starfield"></canvas>

<div id="logo">
  <div id="astro-line">
    <span class="dash">‚Äî‚Äî‚Äî</span>
    AS<span id="sharedT">T<div id="reticle-ring"></div></span>RO
    <span class="dash">‚Äî‚Äî‚Äî</span>
  </div>
  <div id="reticle">
    <div class="caret">^   ^   ^</div>
    <div id="target-line">
      <span id="sharedT">T</span>
      <span>A</span><span>R</span><span>G</span><span>E</span><span>T</span>
    </div>
  </div>
</div>

<div id="tagline">‚ÄúThe sky hides many secrets ‚Äî only explorers will find them.‚Äù</div>
<div id="bootChecks"></div>
<div id="warpQuote">‚ÄúSomewhere, something incredible is waiting to be known.‚Äù ‚Äî Carl Sagan</div>

<script>
const canvas = document.getElementById("starfield");
const ctx = canvas.getContext("2d");
function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

// === Normal Starfield ===
let stars = [];
for (let i=0;i<200;i++) {
  stars.push({
    x: Math.random()*canvas.width,
    y: Math.random()*canvas.height,
    r: Math.random()*1.5,
    phase: Math.random()*Math.PI*2
  });
}
let warpMode = false;
function drawStars() {
  ctx.globalAlpha = 1.0;
  ctx.fillStyle = "black";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  if (warpMode) {
    // Warp effect
    stars.forEach(s=>{
      ctx.beginPath();
      ctx.strokeStyle="cyan";
      ctx.moveTo(canvas.width/2, canvas.height/2);
      ctx.lineTo(s.x, s.y);
      ctx.stroke();
      s.x += (s.x - canvas.width/2) * 0.05;
      s.y += (s.y - canvas.height/2) * 0.05;
      if (s.x<0||s.x>canvas.width||s.y<0||s.y>canvas.height) {
        s.x = canvas.width/2;
        s.y = canvas.height/2;
      }
    });
  } else {
    // Normal twinkle
    stars.forEach(s=>{
      s.phase += 0.02;
      const alpha = 0.6 + 0.4*Math.sin(s.phase);
      ctx.globalAlpha = alpha;
      ctx.beginPath();
      ctx.arc(s.x, s.y, s.r, 0, 2*Math.PI);
      ctx.fillStyle="white";
      ctx.fill();
    });
  }
  ctx.globalAlpha = 1.0;
  requestAnimationFrame(drawStars);
}
drawStars();

// === Animations ===
setTimeout(()=>document.getElementById("astro-line").classList.add("slideInX"),1000);
setTimeout(()=>document.getElementById("target-line").classList.add("slideInY"),2000);
setTimeout(()=>document.getElementById("tagline").classList.add("fadeIn"),3000);

// Boot checks
const bootChecks = document.getElementById("bootChecks");
function logCheck(msg, status="wait", delay=0) {
  setTimeout(()=>{
    let line = document.createElement("div");
    line.className = status;
    line.textContent = msg;
    bootChecks.appendChild(line);
    const lines = bootChecks.querySelectorAll("div");
    if (lines.length > 6) {
      bootChecks.removeChild(lines[0]);
    }
  }, delay);
}
logCheck("‚è≥ Loading catalogs...", "wait", 4000);
logCheck("‚úî Messier loaded (110 objects)", "ok", 5500);
logCheck("‚úî Caldwell loaded (109 objects)", "ok", 6500);
logCheck("‚úî BrightNGC loaded (100 objects)", "ok", 7500);
logCheck("‚è≥ Initializing scope presets...", "wait", 8500);
logCheck("‚úî Scope presets ready", "ok", 9500);
logCheck("‚úî Camera presets ready", "ok", 10500);
logCheck("‚è≥ Fetching GPS...", "wait", 11500);
logCheck("‚úî GPS locked (38.89¬∞N, 77.03¬∞W)", "ok", 13000);
logCheck("‚è≥ Connecting to NASA APOD...", "wait", 14000);
logCheck("‚úî APOD loaded", "ok", 15500);
logCheck("üéØ Lock acquired ‚Äî AstroTarget Ready", "ok", 17000);

// Auto transition after boot
setTimeout(()=>{
  if (!warpMode) {
    document.body.style.opacity = 0;
    setTimeout(()=>{
      window.location.href = "index.html"; 
    }, 2000);
  }
}, 19000);

// === Easter Egg Warp Trigger ===
let tapCount = 0;
const sharedT = document.querySelectorAll("#sharedT");
sharedT.forEach(el=>{
  el.addEventListener("click", ()=>{
    tapCount++;
    if (tapCount >= 7 && !warpMode) {
      warpMode = true;
      document.getElementById("warpQuote").style.opacity = 1;

      // Exit warp after 15s
      setTimeout(()=>{
        warpMode = false;
        document.body.style.opacity = 0;
        setTimeout(()=>{
          window.location.href = "index.html"; 
        }, 2000);
      }, 15000);
    }
  });
});
</script>
</body>
</html>
