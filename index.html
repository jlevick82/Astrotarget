<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Go/No-Go v28.5</title>
<style>
body {
  font-family: system-ui, sans-serif;
  background: #0d1a20;
  color: #d8e0e4;
  margin: 0;
  padding: 1rem;
}
h1 {
  font-size: 2.2em;
  font-weight: 700;
  color: #f4f5f6;
  margin-bottom: .2em;
}
button {
  background: #1e2b33;
  color: #d8e0e4;
  border: 1px solid #2a3a45;
  border-radius: 1em;
  padding: .4em 1.2em;
  margin: .25em;
}
button:hover { background: #283944; }
.card {
  background: #102027;
  border-radius: 1em;
  padding: 1em;
  margin: .75em 0;
  box-shadow: 0 0 4px #0008;
}
.grid {
  display: grid;
  gap: .6em;
}
.cols2fixed {
  grid-template-columns: repeat(2,1fr);
}
.cols3 {
  grid-template-columns: repeat(3,1fr);
}

/* Keep 2 columns longer */
@media (max-width:480px){ .cols2fixed{grid-template-columns:1fr} }
@media (max-width:680px){ .cols3{grid-template-columns:1fr} }

input, select {
  width: 100%;
  border: 1px solid #2a3a45;
  border-radius: .6em;
  padding: .4em;
  background: #14242c;
  color: #d8e0e4;
}
.toast {
  position: fixed;
  bottom: 1.5em;
  left: 50%;
  transform: translateX(-50%);
  background: #2b3a44;
  color: #fff;
  padding: .6em 1.2em;
  border-radius: 1em;
  display: none;
  z-index: 99;
}
.badge {
  display:inline-block;
  background:#0f4;
  color:#021;
  padding:.2em .8em;
  border-radius:1em;
  font-weight:600;
  margin-left:.4em;
}
</style>
</head>
<body>

<h1>Go/No-Go <span style="opacity:.6">v28.5</span></h1>
<div>
  <button id="btnCompact">Compact Off</button>
  <button id="btnNight">Night Mode</button>
</div>

<!-- STATUS -->
<div class="card">
  <h2>Status</h2>
  <div class="grid cols2fixed">
    <div><strong>Decision</strong><br><span id="status-decision">GO</span></div>
    <div><strong>Clouds</strong><br><span id="status-clouds">~0%</span></div>
    <div><strong>Visibility</strong><br><span id="status-vis">15 km</span></div>
    <div><strong>Astro</strong><br><span id="status-astro">Astro dark</span></div>
    <div><strong>Updated</strong><br><span id="status-time">--:--</span></div>
    <div><strong>Sun alt</strong><br><span id="status-sun">--</span></div>
    <div><strong>Moon</strong><br><span id="status-moon">7%</span></div>
    <div><strong>Transparency</strong><br><span id="status-trans">Okay</span></div>
  </div>
</div>

<!-- CONDITIONS -->
<div class="card">
  <h2>Conditions</h2>
  <div class="grid cols2fixed">
    <div><strong>Moon illum</strong><br><span id="cond-moon">7%</span></div>
    <div><strong>Alt</strong><br><span id="cond-alt">-29°</span></div>
    <div><strong>Clouds</strong><br><span id="cond-clouds">0%</span></div>
    <div><strong>Humidity</strong><br><span id="cond-hum">74%</span></div>
  </div>
</div>

<!-- QUICK SETUP -->
<div class="card">
  <h2>Quick setup</h2>
  <div class="grid cols2fixed">
    <div><label>Latitude (°)</label><input id="in-lat" value="37.16556"></div>
    <div><label>Longitude (°)</label><input id="in-lon" value="-76.5684"></div>
    <div><label>Hours (window)</label><input id="in-window" value="3"></div>
    <div><label>Location name</label><input id="in-locname" placeholder="e.g., Backyard"></div>
  </div>
  <div style="margin-top:.5em;">
    <label>Saved locations</label>
    <select id="sel-locations"><option value="">(none)</option></select>
  </div>
  <div style="margin-top:.5em;">
    <button id="btn-loc-gps">Use GPS</button>
    <button id="btn-loc-save">Save</button>
    <button id="btn-loc-load">Load</button>
    <button id="btn-loc-del">Delete</button>
    <button id="btn-calc">Calculate</button>
    <span id="loc-badge" class="badge" style="display:none;">Loaded</span>
  </div>
</div>

<!-- RIG -->
<div class="card">
  <h2>Rig (Scope + Camera)</h2>
  <div class="grid cols2fixed">
    <div><strong>Eff. FL</strong><br><span id="rig-fl">448 mm (0.8×)</span></div>
    <div><strong>FOV</strong><br><span id="rig-fov">1.45 × 1.45</span></div>
    <div><strong>Scale</strong><br><span id="rig-scale">1.73 "/px</span></div>
    <div><strong>Scope</strong><br><span id="rig-scope">SV503 (560×80)</span></div>
  </div>
</div>

<!-- TOP 5 -->
<div class="card">
  <h2>Top 5 Recommendations</h2>
  <ol id="top5">
    <li><a href="#">M33 – Triangulum Galaxy</a></li>
    <li><a href="#">M31 – Andromeda Galaxy</a></li>
    <li><a href="#">M27 – Dumbbell Nebula</a></li>
    <li><a href="#">M57 – Ring Nebula</a></li>
    <li><a href="#">M13 – Hercules Globular</a></li>
  </ol>
</div>

<!-- CATALOG -->
<div class="card">
  <h2>Catalog</h2>
  <input id="search" placeholder="e.g., M31, galaxy, nebula …">
  <button id="btnClear">Clear</button>
  <table style="width:100%;margin-top:.6em;border-collapse:collapse;">
    <thead><tr><th>Name</th><th>Type</th><th>RA</th><th>Dec</th><th>Image</th></tr></thead>
    <tbody id="catalog-body">
      <tr><td>M31 – Andromeda Galaxy</td><td>GX</td><td>0.71h</td><td>41.3°</td><td>[img]</td></tr>
      <tr><td>M33 – Triangulum Galaxy</td><td>GX</td><td>1.55h</td><td>30.7°</td><td>[img]</td></tr>
      <tr><td>M27 – Dumbbell Nebula</td><td>PN</td><td>19.89h</td><td>22.7°</td><td>[img]</td></tr>
      <tr><td>M57 – Ring Nebula</td><td>PN</td><td>18.89h</td><td>33.0°</td><td>[img]</td></tr>
      <tr><td>M13 – Hercules Globular</td><td>GC</td><td>16.70h</td><td>36.5°</td><td>[img]</td></tr>
    </tbody>
  </table>
</div>

<div class="toast" id="toast"></div>

<script>
const $ = s=>document.querySelector(s);
function toast(msg){
  const t=$("#toast"); t.textContent=msg; t.style.display='block';
  setTimeout(()=>t.style.display='none',2000);
}
function ls(k,v){ if(v!==undefined)localStorage.setItem(k,JSON.stringify(v)); return JSON.parse(localStorage.getItem(k)||'null'); }

const state={locations:ls('locations')||{}, lat:37.16556, lon:-76.5684, windowH:3};

// save location
$("#btn-loc-save").onclick=()=>{
  const name=$("#in-locname").value.trim();
  if(!name){toast("Enter location name");return;}
  state.locations[name]={lat:+$("#in-lat").value, lon:+$("#in-lon").value, windowH:+$("#in-window").value};
  ls('locations',state.locations);
  rebuildLocList(); toast("Location saved");
};

// load location
$("#btn-loc-load").onclick=()=>{
  const name=$("#sel-locations").value;
  if(!name || !state.locations[name]){toast("Select a saved location");return;}
  const loc=state.locations[name];
  state.lat=loc.lat; state.lon=loc.lon; state.windowH=loc.windowH;
  $("#in-lat").value=state.lat;
  $("#in-lon").value=state.lon;
  $("#in-window").value=state.windowH;
  $("#in-locname").value=name;
  $("#sel-locations").value=name;
  ls('lat',state.lat); ls('lon',state.lon); ls('windowH',state.windowH);
  showBadge($("#loc-badge"),"Location loaded");
};

// delete
$("#btn-loc-del").onclick=()=>{
  const name=$("#sel-locations").value;
  if(name&&state.locations[name]){delete state.locations[name];ls('locations',state.locations);rebuildLocList();toast("Deleted");}
};
function rebuildLocList(){
  const sel=$("#sel-locations"); sel.innerHTML='<option value="">(none)</option>';
  Object.keys(state.locations).forEach(k=>{
    const o=document.createElement('option'); o.value=k; o.textContent=k; sel.appendChild(o);
  });
}
rebuildLocList();

function showBadge(el,text){
  el.textContent=text; el.style.display='inline-block';
  setTimeout(()=>el.style.display='none',2500);
}
</script>

</body>
</html>
